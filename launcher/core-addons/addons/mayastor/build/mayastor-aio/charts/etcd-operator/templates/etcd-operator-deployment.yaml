---
# Source: mayastor-aio/charts/etcd-operator/templates/etcd-operator-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: etcd-operator-mayastor
  namespace: mayastor
  labels:
    app: etcd-operator-mayastor
spec:
  replicas: 1
  selector:
    matchLabels:
      app: etcd-operator-mayastor
  template:
    metadata:
      labels:
        app: etcd-operator-mayastor
    spec:
      serviceAccountName: etcd-operator-mayastor-sa
      containers:
        - name: operator
          image: cdkbot/etcd-operator:0.10.0-microk8s-3
          command:
            - /operator
          env:
            - name: MY_POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: MY_POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
